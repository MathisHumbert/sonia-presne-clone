/*! For license information please see main.f678a518103ba71196ce.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatecreative_boilerplate("main",{"./app/components/Canvas/Gallery/index.js":(e,i,t)=>{t.r(i),t.d(i,{default:()=>c});var s=t("./node_modules/gsap/index.js"),l=t("./node_modules/prefix/index.js"),n=t.n(l),a=t("./node_modules/lodash/lodash.js"),h=t("./app/components/Canvas/Gallery/Media.js"),r=t("./app/components/Canvas/Gallery/MediaDom.js"),o=t("./app/components/Canvas/Gallery/FooterDom.js");class c{constructor({scene:e,viewport:i,screen:t,geometry:l,template:a,page:h}){this.scene=e,this.viewport=i,this.screen=t,this.geometry=l,this.template=a,this.page=h,this.galleryElement=document.querySelector(".gallery"),this.galleryItemElements=document.querySelectorAll(".gallery__item"),this.logoElement=document.querySelector(".logo__one"),this.headerLogoElement=document.querySelector(".header__logo"),this.headerNavElement=document.querySelector(".header__nav"),this.scroll={position:0,current:0,target:0,limit:0,last:0,velocity:0,ease:.1},this.clamp=s.gsap.utils.clamp(0,this.scroll.limit),this.infinite={current:0,target:0,speed:.5,last:0,diff:0,velocity:0,direction:"up",ease:.1,scrollCurrent:0,scrollTarget:0,scrollLast:0,scrollDiff:0},this.itemWidth=.75*this.screen.height,this.isDown=!1,this.isAnimating=!1,this.view="main",this.filter="all",this.activeIndex=0,this.time=0,this.isScrollable="project"!==this.template,this.pageScroll=null,this.transformPrefix=n()("transform"),this.createGallery(),this.createDomGallery(),this.onResize({viewport:i,screen:t}),this.show(),this.footerDom=new o.default({onButtonViewClick:this.onViewClick.bind(this),onButtonFilterClick:this.onFilterClick.bind(this)})}createDomGallery(){this.mediaElements=(0,a.map)(this.galleryItemElements,((e,i)=>new r.default({element:e,index:i,screen:this.screen,media:this.medias[i],template:this.template}))),this.mediaElementsFiltered=(0,a.filter)(this.mediaElements,(e=>!0===e.isMain))}createGallery(){this.medias=(0,a.map)(this.galleryItemElements,((e,i)=>new h.default({element:e,index:i,scene:this.scene,viewport:this.viewport,screen:this.screen,geometry:this.geometry,template:this.template})))}show(){(0,a.each)(this.medias,(e=>{e&&e.show&&e.show()}))}hide(){(0,a.each)(this.medias,(e=>{e&&e.hide&&e.hide()}))}onResize({viewport:e,screen:i}){if(this.isAnimating)return;this.viewport=e,this.screen=i,this.mainMediaElementSizes={width:.42*this.screen.height,margin:.33*this.screen.height,total:.42*this.screen.height+.33*this.screen.height},this.allMediaElementSizes={width:.42*this.screen.height*.7,margin:.126*this.screen.height,total:.42*this.screen.height*.7+.126*this.screen.height},this.aboutMediaElementSizes={width:.42*this.screen.height*.7,margin:.056*this.screen.height,total:.42*this.screen.height*.7+.056*this.screen.height},"about"===this.template&&(this.scroll.current=this.scroll.target=this.scroll.last=5.5*(this.aboutMediaElementSizes.width+this.aboutMediaElementSizes.margin)),"main"===this.view?this.scroll.limit=(this.mediaElementsFiltered.length-1)*(this.mainMediaElementSizes.width+this.mainMediaElementSizes.margin):this.scroll.limit=(this.mediaElementsFiltered.length-1)*(this.allMediaElementSizes.width+this.allMediaElementSizes.margin),this.clamp=s.gsap.utils.clamp(0,this.scroll.limit);const t=this.page.galleryStart-this.page.scroll.current;(0,a.each)(this.mediaElementsFiltered,((e,s)=>{e&&e.onResize&&e.onResize({screen:i,mainMediaElementSizes:this.mainMediaElementSizes,allMediaElementSizes:this.allMediaElementSizes,aboutMediaElementSizes:this.aboutMediaElementSizes,view:this.view,galleryY:t,index:s})})),(0,a.each)(this.medias,(t=>{t&&t.onResize&&t.onResize({viewport:e,screen:i})}))}onTouchDown(e){!this.isAnimating&&this.isScrollable&&(this.isDown=!0,this.scroll.position=this.scroll.current,this.start=e.touches?e.touches[0].clientX:e.clientX)}onTouchMove(e){if(!this.isDown||this.isAnimating||!this.isScrollable)return;const i=e.touches?e.touches[0].clientX:e.clientX,t=this.start-i;this.scroll.target=this.scroll.position+t}onTouchUp(){!this.isAnimating&&this.isScrollable&&(this.isDown=!1)}onWheel({pixelY:e}){!this.isAnimating&&this.isScrollable&&("about"===this.template?(this.infinite.target+=.1*e,this.infinite.scrollTarget+=e,e>0&&"up"!==this.infinite.direction?this.infinite.direction="up":e<0&&"down"!==this.infinite.direction&&(this.infinite.direction="down")):this.scroll.target+=e)}onViewClick(){this.isAnimating||(this.isAnimating=!0,"main"===this.view?(this.galleryElement.classList.add("is-overview"),this.footerDom.onViewClick({view:this.view,totalMediaElements:19}),this.onShowAll()):(this.galleryElement.classList.remove("is-overview"),this.footerDom.onViewClick({view:this.view,totalMediaElements:12}),this.filter,this.onShowMain()))}onFilterClick({filter:e}){e===this.filter||this.isAnimating||(this.isAnimating=!0,this.filter=e,"all"==this.filter?this.onShowAll():this.onShowFilter())}onShowFilter(){const e=(this.allMediaElementSizes.total-this.allMediaElementSizes.width/2)*this.mediaElementsFiltered.length;this.mediaElementsFiltered=(0,a.filter)(this.mediaElements,(e=>e.category===this.filter));const i=(this.allMediaElementSizes.total-this.allMediaElementSizes.width/2)*(this.mediaElementsFiltered.length-1);this.scroll.current=this.scroll.target=this.scroll.last=this.scroll.current*(i/e),this.footerDom.onChangeCounterTotal({total:this.mediaElementsFiltered.length});let t=0;(0,a.each)(this.mediaElements,((e,i)=>{if(e.category!==this.filter){const s=(this.allMediaElementSizes.width+this.allMediaElementSizes.margin)*t-this.allMediaElementSizes.width/2;e.changeSizeFromAllToFilter({scroll:this.scroll.current,category:this.filter,index:i,endX:s})}else{const i=(0,a.findIndex)(this.mediaElementsFiltered,(i=>i.index===e.index));t=i,e.changeSizeFromAllToFilter({scroll:this.scroll.current,category:this.filter,index:i})}})),s.gsap.delayedCall(1,(()=>{this.onShowEnd("all")}))}onShowMain(){"all"===this.filter&&(this.mediaElementsFiltered=(0,a.filter)(this.mediaElements,(e=>!0===e.isMain)));const e=(this.allMediaElementSizes.total-this.allMediaElementSizes.width/2)*this.mediaElementsFiltered.length;"all"!==this.filter&&(this.mediaElementsFiltered=(0,a.filter)(this.mediaElements,(e=>!0===e.isMain)));const i=(this.mainMediaElementSizes.total-this.mainMediaElementSizes.width/2)*(this.mediaElementsFiltered.length-1);this.scroll.current=this.scroll.target=this.scroll.last=this.scroll.current*(i/e);const t=-this.scroll.current+this.mainMediaElementSizes.total*(this.mediaElementsFiltered.length-1)-this.mainMediaElementSizes.width/2;(0,a.each)(this.mediaElements,(e=>{e.changeSizeFromAllToMain({scroll:this.scroll.current,endX:t})})),s.gsap.delayedCall(1,(()=>{this.onShowEnd("main")}))}onShowAll(){const e=-this.scroll.current+this.mainMediaElementSizes.total*(this.mediaElementsFiltered.length-1)-this.mainMediaElementSizes.width/2,i=(this.mainMediaElementSizes.total-this.mainMediaElementSizes.width/2)*(this.mediaElementsFiltered.length-1),t=(this.allMediaElementSizes.total-this.allMediaElementSizes.width/2)*this.mediaElementsFiltered.length;this.scroll.current=this.scroll.target=this.scroll.last=this.scroll.current*(t/i),this.mediaElementsFiltered=this.mediaElements,this.footerDom.onChangeCounterTotal({total:this.mediaElementsFiltered.length}),(0,a.each)(this.mediaElementsFiltered,((i,t)=>{i.changeSizeFromMainToAll({scroll:this.scroll.current,startX:e,allMediaElementSizes:this.allMediaElementSizes,index:t})})),s.gsap.delayedCall(1,(()=>{this.onShowEnd("all")}))}onShowEnd(e){this.view=e,"main"===this.view?this.scroll.limit=(this.mediaElementsFiltered.length-1)*(this.mainMediaElementSizes.width+this.mainMediaElementSizes.margin):this.scroll.limit=(this.mediaElementsFiltered.length-1)*(this.allMediaElementSizes.width+this.allMediaElementSizes.margin),this.clamp=s.gsap.utils.clamp(0,this.scroll.limit),this.isAnimating=!1}onHomeToAbout(){this.template="about",(0,a.each)(this.medias,(e=>{e.template="about"})),this.scroll.current=this.scroll.target=this.scroll.last=5.5*(this.aboutMediaElementSizes.width+this.aboutMediaElementSizes.margin),this.infinite={current:0,target:0,last:0,velocity:0,speed:.5,ease:.1,direction:"up"},(0,a.each)(this.mediaElements,(e=>e.changeSizeFromHomeToAbout({scroll:this.scroll.current,aboutMediaElementSizes:this.aboutMediaElementSizes}))),s.gsap.delayedCall(1,(()=>{this.isAnimating=!1}))}onAboutToHome(){this.template="home",(0,a.each)(this.medias,(e=>{e.template="home",e.extra=0})),this.mediaElementsFiltered=(0,a.filter)(this.mediaElements,(e=>!0===e.isMain)),this.scroll.current=this.scroll.target=this.scroll.last=5.5*(this.mainMediaElementSizes.width+this.mainMediaElementSizes.margin);const e=-this.scroll.current+this.mainMediaElementSizes.total*(this.mediaElementsFiltered.length-1)-this.mainMediaElementSizes.width/2;(0,a.each)(this.mediaElements,(i=>{i.changeSizeFromAboutToHome({scroll:this.scroll.current,endX:e})})),s.gsap.delayedCall(1,(()=>{this.scroll.limit=(this.mediaElementsFiltered.length-1)*(this.mainMediaElementSizes.width+this.mainMediaElementSizes.margin),this.clamp=s.gsap.utils.clamp(0,this.scroll.limit),this.isAnimating=!1,this.view="main"}))}onProjectToHome(){this.template="home",(0,a.each)(this.medias,(e=>{e.template="home",e.pageScroll=0})),this.isScrollable&&"all"===this.view&&this.onShowMain(),(0,a.each)(this.mediaElements,(e=>{e.view="main",e.template="home"})),s.gsap.delayedCall(1,(()=>{this.isScrollable=!0,this.isAnimating=!1,this.view="main"}))}onChangeIndex(){if(this.isAnimating||this.activeIndex>this.mediaElementsFiltered.length-1)return;const e=this.mediaElementsFiltered[this.activeIndex].element;this.footerDom.onChangeIndex({activeMediaElement:e,activeIndex:this.activeIndex,view:this.view})}update({scroll:e,pageScrollable:i}){this.isAnimating||(this.time+=.01,"about"===this.template?this.aboutUpdate():this.normalUpdate({scroll:e,pageScrollable:i}))}normalUpdate({scroll:e,pageScrollable:i}){"project"===this.template&&(i||this.isScrollable?this.isScrollable&&this.scroll.target<0&&"main"===this.view&&(this.isScrollable=!1,this.page.isScrollable=!0,this.footerDom.hide(),this.galleryElement.classList.remove("active"),this.headerNavElement.classList.remove("active"),s.gsap.delayedCall(.5,(()=>this.headerLogoElement.classList.add("active")))):(this.isScrollable=!0,this.footerDom.show(),this.galleryElement.classList.add("active"),this.headerLogoElement.classList.remove("active"),s.gsap.delayedCall(.5,(()=>this.headerNavElement.classList.add("active"))))),this.scroll.target=this.clamp(this.scroll.target),this.scroll.current=s.gsap.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.ease),this.scroll.current=Math.floor(this.scroll.current),this.scroll.current<.01&&(this.scroll.current=0),this.scroll.velocity=Math.abs(.1*(this.scroll.current-this.scroll.last)),this.scroll.last=this.scroll.current;let t=this.activeIndex;e&&0!==e&&(this.pageScroll=e+.33*this.screen.height),t="main"===this.view?Math.round(this.scroll.current/this.mainMediaElementSizes.total):Math.round(this.scroll.current/this.allMediaElementSizes.total),t!==this.activeIndex&&(this.activeIndex=t,this.onChangeIndex()),"project"===this.template?(0,a.each)(this.medias,(e=>{e&&e.update&&e.update({pageScroll:this.pageScroll,scroll:this.scroll.current,velocity:this.scroll.velocity,time:this.time})})):(0,a.each)(this.medias,(e=>{e&&e.update&&e.update({scroll:this.scroll.current,velocity:this.scroll.velocity,time:this.time})})),(0,a.each)(this.mediaElementsFiltered,(e=>{e&&e.update&&e.update({scroll:this.scroll.current})}))}aboutUpdate(){"up"===this.infinite.direction?this.infinite.target+=this.infinite.speed:this.infinite.target-=this.infinite.speed,this.infinite.current=s.gsap.utils.interpolate(this.infinite.current,this.infinite.target,this.infinite.ease),this.infinite.scrollCurrent=s.gsap.utils.interpolate(this.infinite.scrollCurrent,this.infinite.scrollTarget,this.infinite.ease);let e=Math.abs(this.infinite.scrollCurrent-this.infinite.scrollLast);e<1.5&&(e=0),e>this.infinite.scrollDiff&&(this.infinite.scrollDiff=e,this.infinite.speed=.02*this.infinite.scrollDiff),0===e&&0!==this.infinite.scrollDiff&&(this.infinite.scrollDiff=0),this.infinite.velocity=Math.abs(.1*(this.infinite.current-this.infinite.last)),this.infinite.last=this.infinite.current,this.infinite.scrollLast=this.infinite.scrollCurrent,(0,a.each)(this.medias,((e,i)=>{e&&e.update&&(i%2==0?e.update({scroll:this.scroll.current,infinite:-this.infinite.current,velocity:0,direction:"up"===this.infinite.direction?"down":"up",time:this.time}):e.update({scroll:this.scroll.current,infinite:this.infinite.current,velocity:0,direction:this.infinite.direction,time:this.time}))})),(0,a.each)(this.mediaElementsFiltered,(e=>{e&&e.update&&e.update({scroll:this.scroll.current})}))}destroy(){this.media&&this.media.mesh.removeFromParent()}}}},(function(e){e.h=()=>"db7547f0c8d86b4486b8"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxPQUNQeEQsS0FBS3dELE1BQU11RSxLQUFLQyxrQkFFcEIsa0JDbndCRkMsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2NyZWF0aXZlLWJvaWxlcnBsYXRlLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL0dhbGxlcnkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY3JlYXRpdmUtYm9pbGVycGxhdGUvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwJztcbmltcG9ydCBQcmVmaXggZnJvbSAncHJlZml4JztcbmltcG9ydCB7IG1hcCwgZWFjaCwgZmlsdGVyLCBmaW5kSW5kZXggfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgTWVkaWEgZnJvbSAnLi9NZWRpYSc7XG5pbXBvcnQgTWVkaWFEb20gZnJvbSAnLi9NZWRpYURvbSc7XG5pbXBvcnQgRm9vdGVyRG9tIGZyb20gJy4vRm9vdGVyRG9tJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FsbGVyeSB7XG4gIGNvbnN0cnVjdG9yKHsgc2NlbmUsIHZpZXdwb3J0LCBzY3JlZW4sIGdlb21ldHJ5LCB0ZW1wbGF0ZSwgcGFnZSB9KSB7XG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICB0aGlzLnNjcmVlbiA9IHNjcmVlbjtcbiAgICB0aGlzLmdlb21ldHJ5ID0gZ2VvbWV0cnk7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHRoaXMucGFnZSA9IHBhZ2U7XG5cbiAgICB0aGlzLmdhbGxlcnlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnknKTtcbiAgICB0aGlzLmdhbGxlcnlJdGVtRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FsbGVyeV9faXRlbScpO1xuICAgIHRoaXMubG9nb0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9nb19fb25lJyk7XG4gICAgdGhpcy5oZWFkZXJMb2dvRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2xvZ28nKTtcbiAgICB0aGlzLmhlYWRlck5hdkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19uYXYnKTtcblxuICAgIHRoaXMuc2Nyb2xsID0ge1xuICAgICAgcG9zaXRpb246IDAsXG4gICAgICBjdXJyZW50OiAwLFxuICAgICAgdGFyZ2V0OiAwLFxuICAgICAgbGltaXQ6IDAsXG4gICAgICBsYXN0OiAwLFxuICAgICAgdmVsb2NpdHk6IDAsXG4gICAgICBlYXNlOiAwLjEsXG4gICAgfTtcbiAgICB0aGlzLmNsYW1wID0gZ3NhcC51dGlscy5jbGFtcCgwLCB0aGlzLnNjcm9sbC5saW1pdCk7XG5cbiAgICB0aGlzLmluZmluaXRlID0ge1xuICAgICAgY3VycmVudDogMCxcbiAgICAgIHRhcmdldDogMCxcbiAgICAgIHNwZWVkOiAwLjUsXG4gICAgICBsYXN0OiAwLFxuICAgICAgZGlmZjogMCxcbiAgICAgIHZlbG9jaXR5OiAwLFxuICAgICAgZGlyZWN0aW9uOiAndXAnLFxuICAgICAgZWFzZTogMC4xLFxuICAgICAgc2Nyb2xsQ3VycmVudDogMCxcbiAgICAgIHNjcm9sbFRhcmdldDogMCxcbiAgICAgIHNjcm9sbExhc3Q6IDAsXG4gICAgICBzY3JvbGxEaWZmOiAwLFxuICAgIH07XG5cbiAgICB0aGlzLml0ZW1XaWR0aCA9IHRoaXMuc2NyZWVuLmhlaWdodCAqIDAuNzU7XG5cbiAgICB0aGlzLmlzRG93biA9IGZhbHNlO1xuICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnZpZXcgPSAnbWFpbic7XG4gICAgdGhpcy5maWx0ZXIgPSAnYWxsJztcbiAgICB0aGlzLmFjdGl2ZUluZGV4ID0gMDtcbiAgICB0aGlzLnRpbWUgPSAwO1xuICAgIHRoaXMuaXNTY3JvbGxhYmxlID0gdGhpcy50ZW1wbGF0ZSAhPT0gJ3Byb2plY3QnO1xuICAgIHRoaXMucGFnZVNjcm9sbCA9IG51bGw7XG5cbiAgICB0aGlzLnRyYW5zZm9ybVByZWZpeCA9IFByZWZpeCgndHJhbnNmb3JtJyk7XG5cbiAgICB0aGlzLmNyZWF0ZUdhbGxlcnkoKTtcbiAgICB0aGlzLmNyZWF0ZURvbUdhbGxlcnkoKTtcblxuICAgIHRoaXMub25SZXNpemUoeyB2aWV3cG9ydCwgc2NyZWVuIH0pO1xuICAgIHRoaXMuc2hvdygpO1xuXG4gICAgdGhpcy5mb290ZXJEb20gPSBuZXcgRm9vdGVyRG9tKHtcbiAgICAgIG9uQnV0dG9uVmlld0NsaWNrOiB0aGlzLm9uVmlld0NsaWNrLmJpbmQodGhpcyksXG4gICAgICBvbkJ1dHRvbkZpbHRlckNsaWNrOiB0aGlzLm9uRmlsdGVyQ2xpY2suYmluZCh0aGlzKSxcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZURvbUdhbGxlcnkoKSB7XG4gICAgdGhpcy5tZWRpYUVsZW1lbnRzID0gbWFwKFxuICAgICAgdGhpcy5nYWxsZXJ5SXRlbUVsZW1lbnRzLFxuICAgICAgKGVsZW1lbnQsIGluZGV4KSA9PlxuICAgICAgICBuZXcgTWVkaWFEb20oe1xuICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgc2NyZWVuOiB0aGlzLnNjcmVlbixcbiAgICAgICAgICBtZWRpYTogdGhpcy5tZWRpYXNbaW5kZXhdLFxuICAgICAgICAgIHRlbXBsYXRlOiB0aGlzLnRlbXBsYXRlLFxuICAgICAgICB9KVxuICAgICk7XG5cbiAgICB0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZCA9IGZpbHRlcihcbiAgICAgIHRoaXMubWVkaWFFbGVtZW50cyxcbiAgICAgIChpdGVtKSA9PiBpdGVtLmlzTWFpbiA9PT0gdHJ1ZVxuICAgICk7XG4gIH1cblxuICBjcmVhdGVHYWxsZXJ5KCkge1xuICAgIHRoaXMubWVkaWFzID0gbWFwKFxuICAgICAgdGhpcy5nYWxsZXJ5SXRlbUVsZW1lbnRzLFxuICAgICAgKGVsZW1lbnQsIGluZGV4KSA9PlxuICAgICAgICBuZXcgTWVkaWEoe1xuICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICAgICAgdmlld3BvcnQ6IHRoaXMudmlld3BvcnQsXG4gICAgICAgICAgc2NyZWVuOiB0aGlzLnNjcmVlbixcbiAgICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcbiAgICAgICAgICB0ZW1wbGF0ZTogdGhpcy50ZW1wbGF0ZSxcbiAgICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuaW1hdGlvbnMuXG4gICAqL1xuICBzaG93KCkge1xuICAgIGVhY2godGhpcy5tZWRpYXMsIChtZWRpYSkgPT4ge1xuICAgICAgaWYgKG1lZGlhICYmIG1lZGlhLnNob3cpIHtcbiAgICAgICAgbWVkaWEuc2hvdygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaGlkZSgpIHtcbiAgICBlYWNoKHRoaXMubWVkaWFzLCAobWVkaWEpID0+IHtcbiAgICAgIGlmIChtZWRpYSAmJiBtZWRpYS5oaWRlKSB7XG4gICAgICAgIG1lZGlhLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudHMuXG4gICAqL1xuICBvblJlc2l6ZSh7IHZpZXdwb3J0LCBzY3JlZW4gfSkge1xuICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nKSByZXR1cm47XG5cbiAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgdGhpcy5zY3JlZW4gPSBzY3JlZW47XG5cbiAgICB0aGlzLm1haW5NZWRpYUVsZW1lbnRTaXplcyA9IHtcbiAgICAgIHdpZHRoOiB0aGlzLnNjcmVlbi5oZWlnaHQgKiAwLjQyLFxuICAgICAgbWFyZ2luOiB0aGlzLnNjcmVlbi5oZWlnaHQgKiAwLjMzLFxuICAgICAgdG90YWw6IHRoaXMuc2NyZWVuLmhlaWdodCAqIDAuNDIgKyB0aGlzLnNjcmVlbi5oZWlnaHQgKiAwLjMzLFxuICAgIH07XG5cbiAgICB0aGlzLmFsbE1lZGlhRWxlbWVudFNpemVzID0ge1xuICAgICAgd2lkdGg6IHRoaXMuc2NyZWVuLmhlaWdodCAqIDAuNDIgKiAwLjcsXG4gICAgICBtYXJnaW46IHRoaXMuc2NyZWVuLmhlaWdodCAqIDAuMTI2LFxuICAgICAgdG90YWw6IHRoaXMuc2NyZWVuLmhlaWdodCAqIDAuNDIgKiAwLjcgKyB0aGlzLnNjcmVlbi5oZWlnaHQgKiAwLjEyNixcbiAgICB9O1xuXG4gICAgdGhpcy5hYm91dE1lZGlhRWxlbWVudFNpemVzID0ge1xuICAgICAgd2lkdGg6IHRoaXMuc2NyZWVuLmhlaWdodCAqIDAuNDIgKiAwLjcsXG4gICAgICBtYXJnaW46IHRoaXMuc2NyZWVuLmhlaWdodCAqIDAuMDU2LFxuICAgICAgdG90YWw6IHRoaXMuc2NyZWVuLmhlaWdodCAqIDAuNDIgKiAwLjcgKyB0aGlzLnNjcmVlbi5oZWlnaHQgKiAwLjA1NixcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMudGVtcGxhdGUgPT09ICdhYm91dCcpIHtcbiAgICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPVxuICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgPVxuICAgICAgICB0aGlzLnNjcm9sbC5sYXN0ID1cbiAgICAgICAgICAodGhpcy5hYm91dE1lZGlhRWxlbWVudFNpemVzLndpZHRoICtcbiAgICAgICAgICAgIHRoaXMuYWJvdXRNZWRpYUVsZW1lbnRTaXplcy5tYXJnaW4pICpcbiAgICAgICAgICA1LjU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudmlldyA9PT0gJ21haW4nKSB7XG4gICAgICB0aGlzLnNjcm9sbC5saW1pdCA9XG4gICAgICAgICh0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZC5sZW5ndGggLSAxKSAqXG4gICAgICAgICh0aGlzLm1haW5NZWRpYUVsZW1lbnRTaXplcy53aWR0aCArIHRoaXMubWFpbk1lZGlhRWxlbWVudFNpemVzLm1hcmdpbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2Nyb2xsLmxpbWl0ID1cbiAgICAgICAgKHRoaXMubWVkaWFFbGVtZW50c0ZpbHRlcmVkLmxlbmd0aCAtIDEpICpcbiAgICAgICAgKHRoaXMuYWxsTWVkaWFFbGVtZW50U2l6ZXMud2lkdGggKyB0aGlzLmFsbE1lZGlhRWxlbWVudFNpemVzLm1hcmdpbik7XG4gICAgfVxuXG4gICAgdGhpcy5jbGFtcCA9IGdzYXAudXRpbHMuY2xhbXAoMCwgdGhpcy5zY3JvbGwubGltaXQpO1xuXG4gICAgY29uc3QgZ2FsbGVyeVkgPSB0aGlzLnBhZ2UuZ2FsbGVyeVN0YXJ0IC0gdGhpcy5wYWdlLnNjcm9sbC5jdXJyZW50O1xuXG4gICAgZWFjaCh0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZCwgKG1lZGlhbEVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICBpZiAobWVkaWFsRWxlbWVudCAmJiBtZWRpYWxFbGVtZW50Lm9uUmVzaXplKSB7XG4gICAgICAgIG1lZGlhbEVsZW1lbnQub25SZXNpemUoe1xuICAgICAgICAgIHNjcmVlbixcbiAgICAgICAgICBtYWluTWVkaWFFbGVtZW50U2l6ZXM6IHRoaXMubWFpbk1lZGlhRWxlbWVudFNpemVzLFxuICAgICAgICAgIGFsbE1lZGlhRWxlbWVudFNpemVzOiB0aGlzLmFsbE1lZGlhRWxlbWVudFNpemVzLFxuICAgICAgICAgIGFib3V0TWVkaWFFbGVtZW50U2l6ZXM6IHRoaXMuYWJvdXRNZWRpYUVsZW1lbnRTaXplcyxcbiAgICAgICAgICB2aWV3OiB0aGlzLnZpZXcsXG4gICAgICAgICAgZ2FsbGVyeVksXG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZWFjaCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiB7XG4gICAgICBpZiAobWVkaWEgJiYgbWVkaWEub25SZXNpemUpIHtcbiAgICAgICAgbWVkaWEub25SZXNpemUoe1xuICAgICAgICAgIHZpZXdwb3J0LFxuICAgICAgICAgIHNjcmVlbixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvblRvdWNoRG93bihldmVudCkge1xuICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nIHx8ICF0aGlzLmlzU2Nyb2xsYWJsZSkgcmV0dXJuO1xuXG4gICAgdGhpcy5pc0Rvd24gPSB0cnVlO1xuXG4gICAgdGhpcy5zY3JvbGwucG9zaXRpb24gPSB0aGlzLnNjcm9sbC5jdXJyZW50O1xuICAgIHRoaXMuc3RhcnQgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQuY2xpZW50WDtcbiAgfVxuXG4gIG9uVG91Y2hNb3ZlKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmlzRG93biB8fCB0aGlzLmlzQW5pbWF0aW5nIHx8ICF0aGlzLmlzU2Nyb2xsYWJsZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgeCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYO1xuICAgIGNvbnN0IGRpc3RhbmNlID0gdGhpcy5zdGFydCAtIHg7XG5cbiAgICB0aGlzLnNjcm9sbC50YXJnZXQgPSB0aGlzLnNjcm9sbC5wb3NpdGlvbiArIGRpc3RhbmNlO1xuICB9XG5cbiAgb25Ub3VjaFVwKCkge1xuICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nIHx8ICF0aGlzLmlzU2Nyb2xsYWJsZSkgcmV0dXJuO1xuXG4gICAgdGhpcy5pc0Rvd24gPSBmYWxzZTtcbiAgfVxuXG4gIG9uV2hlZWwoeyBwaXhlbFkgfSkge1xuICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nIHx8ICF0aGlzLmlzU2Nyb2xsYWJsZSkgcmV0dXJuO1xuXG4gICAgaWYgKHRoaXMudGVtcGxhdGUgPT09ICdhYm91dCcpIHtcbiAgICAgIHRoaXMuaW5maW5pdGUudGFyZ2V0ICs9IHBpeGVsWSAqIDAuMTtcbiAgICAgIHRoaXMuaW5maW5pdGUuc2Nyb2xsVGFyZ2V0ICs9IHBpeGVsWTtcblxuICAgICAgaWYgKHBpeGVsWSA+IDAgJiYgdGhpcy5pbmZpbml0ZS5kaXJlY3Rpb24gIT09ICd1cCcpIHtcbiAgICAgICAgdGhpcy5pbmZpbml0ZS5kaXJlY3Rpb24gPSAndXAnO1xuICAgICAgfSBlbHNlIGlmIChwaXhlbFkgPCAwICYmIHRoaXMuaW5maW5pdGUuZGlyZWN0aW9uICE9PSAnZG93bicpIHtcbiAgICAgICAgdGhpcy5pbmZpbml0ZS5kaXJlY3Rpb24gPSAnZG93bic7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCArPSBwaXhlbFk7XG4gICAgfVxuICB9XG5cbiAgb25WaWV3Q2xpY2soKSB7XG4gICAgaWYgKHRoaXMuaXNBbmltYXRpbmcpIHJldHVybjtcblxuICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMudmlldyA9PT0gJ21haW4nKSB7XG4gICAgICB0aGlzLmdhbGxlcnlFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLW92ZXJ2aWV3Jyk7XG5cbiAgICAgIHRoaXMuZm9vdGVyRG9tLm9uVmlld0NsaWNrKHtcbiAgICAgICAgdmlldzogdGhpcy52aWV3LFxuICAgICAgICB0b3RhbE1lZGlhRWxlbWVudHM6IDE5LFxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMub25TaG93QWxsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ2FsbGVyeUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtb3ZlcnZpZXcnKTtcblxuICAgICAgdGhpcy5mb290ZXJEb20ub25WaWV3Q2xpY2soe1xuICAgICAgICB2aWV3OiB0aGlzLnZpZXcsXG4gICAgICAgIHRvdGFsTWVkaWFFbGVtZW50czogMTIsXG4gICAgICB9KTtcblxuICAgICAgdGhpcy5maWx0ZXIgPT0gJ2FsbCc7XG5cbiAgICAgIHRoaXMub25TaG93TWFpbigpO1xuICAgIH1cbiAgfVxuXG4gIG9uRmlsdGVyQ2xpY2soeyBmaWx0ZXIgfSkge1xuICAgIGlmIChmaWx0ZXIgPT09IHRoaXMuZmlsdGVyIHx8IHRoaXMuaXNBbmltYXRpbmcpIHJldHVybjtcblxuICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgdGhpcy5maWx0ZXIgPSBmaWx0ZXI7XG5cbiAgICBpZiAodGhpcy5maWx0ZXIgPT0gJ2FsbCcpIHtcbiAgICAgIHRoaXMub25TaG93QWxsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub25TaG93RmlsdGVyKCk7XG4gICAgfVxuICB9XG5cbiAgb25TaG93RmlsdGVyKCkge1xuICAgIGNvbnN0IHN0YXJ0V2lkdGggPVxuICAgICAgKHRoaXMuYWxsTWVkaWFFbGVtZW50U2l6ZXMudG90YWwgLSB0aGlzLmFsbE1lZGlhRWxlbWVudFNpemVzLndpZHRoIC8gMikgKlxuICAgICAgdGhpcy5tZWRpYUVsZW1lbnRzRmlsdGVyZWQubGVuZ3RoO1xuXG4gICAgdGhpcy5tZWRpYUVsZW1lbnRzRmlsdGVyZWQgPSBmaWx0ZXIoXG4gICAgICB0aGlzLm1lZGlhRWxlbWVudHMsXG4gICAgICAoaXRlbSkgPT4gaXRlbS5jYXRlZ29yeSA9PT0gdGhpcy5maWx0ZXJcbiAgICApO1xuXG4gICAgY29uc3QgZW5kV2lkdGggPVxuICAgICAgKHRoaXMuYWxsTWVkaWFFbGVtZW50U2l6ZXMudG90YWwgLSB0aGlzLmFsbE1lZGlhRWxlbWVudFNpemVzLndpZHRoIC8gMikgKlxuICAgICAgKHRoaXMubWVkaWFFbGVtZW50c0ZpbHRlcmVkLmxlbmd0aCAtIDEpO1xuXG4gICAgdGhpcy5zY3JvbGwuY3VycmVudCA9XG4gICAgICB0aGlzLnNjcm9sbC50YXJnZXQgPVxuICAgICAgdGhpcy5zY3JvbGwubGFzdCA9XG4gICAgICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgKiAoZW5kV2lkdGggLyBzdGFydFdpZHRoKTtcblxuICAgIHRoaXMuZm9vdGVyRG9tLm9uQ2hhbmdlQ291bnRlclRvdGFsKHtcbiAgICAgIHRvdGFsOiB0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZC5sZW5ndGgsXG4gICAgfSk7XG5cbiAgICBsZXQgbGFzdEZpbHRlckluZGV4ID0gMDtcblxuICAgIGVhY2godGhpcy5tZWRpYUVsZW1lbnRzLCAoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChlbGVtZW50LmNhdGVnb3J5ICE9PSB0aGlzLmZpbHRlcikge1xuICAgICAgICBjb25zdCBlbmRYID1cbiAgICAgICAgICAodGhpcy5hbGxNZWRpYUVsZW1lbnRTaXplcy53aWR0aCArIHRoaXMuYWxsTWVkaWFFbGVtZW50U2l6ZXMubWFyZ2luKSAqXG4gICAgICAgICAgICBsYXN0RmlsdGVySW5kZXggLVxuICAgICAgICAgIHRoaXMuYWxsTWVkaWFFbGVtZW50U2l6ZXMud2lkdGggLyAyO1xuXG4gICAgICAgIGVsZW1lbnQuY2hhbmdlU2l6ZUZyb21BbGxUb0ZpbHRlcih7XG4gICAgICAgICAgc2Nyb2xsOiB0aGlzLnNjcm9sbC5jdXJyZW50LFxuICAgICAgICAgIGNhdGVnb3J5OiB0aGlzLmZpbHRlcixcbiAgICAgICAgICBpbmRleCxcbiAgICAgICAgICBlbmRYLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRJbmRleCA9IGZpbmRJbmRleChcbiAgICAgICAgICB0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZCxcbiAgICAgICAgICAoZWwpID0+IGVsLmluZGV4ID09PSBlbGVtZW50LmluZGV4XG4gICAgICAgICk7XG5cbiAgICAgICAgbGFzdEZpbHRlckluZGV4ID0gZWxlbWVudEluZGV4O1xuXG4gICAgICAgIGVsZW1lbnQuY2hhbmdlU2l6ZUZyb21BbGxUb0ZpbHRlcih7XG4gICAgICAgICAgc2Nyb2xsOiB0aGlzLnNjcm9sbC5jdXJyZW50LFxuICAgICAgICAgIGNhdGVnb3J5OiB0aGlzLmZpbHRlcixcbiAgICAgICAgICBpbmRleDogZWxlbWVudEluZGV4LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGdzYXAuZGVsYXllZENhbGwoMSwgKCkgPT4ge1xuICAgICAgdGhpcy5vblNob3dFbmQoJ2FsbCcpO1xuICAgIH0pO1xuICB9XG5cbiAgb25TaG93TWFpbigpIHtcbiAgICBpZiAodGhpcy5maWx0ZXIgPT09ICdhbGwnKSB7XG4gICAgICB0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZCA9IGZpbHRlcihcbiAgICAgICAgdGhpcy5tZWRpYUVsZW1lbnRzLFxuICAgICAgICAoaXRlbSkgPT4gaXRlbS5pc01haW4gPT09IHRydWVcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRXaWR0aCA9XG4gICAgICAodGhpcy5hbGxNZWRpYUVsZW1lbnRTaXplcy50b3RhbCAtIHRoaXMuYWxsTWVkaWFFbGVtZW50U2l6ZXMud2lkdGggLyAyKSAqXG4gICAgICB0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZC5sZW5ndGg7XG5cbiAgICBpZiAodGhpcy5maWx0ZXIgIT09ICdhbGwnKSB7XG4gICAgICB0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZCA9IGZpbHRlcihcbiAgICAgICAgdGhpcy5tZWRpYUVsZW1lbnRzLFxuICAgICAgICAoaXRlbSkgPT4gaXRlbS5pc01haW4gPT09IHRydWVcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgZW5kV2lkdGggPVxuICAgICAgKHRoaXMubWFpbk1lZGlhRWxlbWVudFNpemVzLnRvdGFsIC1cbiAgICAgICAgdGhpcy5tYWluTWVkaWFFbGVtZW50U2l6ZXMud2lkdGggLyAyKSAqXG4gICAgICAodGhpcy5tZWRpYUVsZW1lbnRzRmlsdGVyZWQubGVuZ3RoIC0gMSk7XG5cbiAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID1cbiAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9XG4gICAgICB0aGlzLnNjcm9sbC5sYXN0ID1cbiAgICAgICAgdGhpcy5zY3JvbGwuY3VycmVudCAqIChlbmRXaWR0aCAvIHN0YXJ0V2lkdGgpO1xuXG4gICAgY29uc3QgZW5kWCA9XG4gICAgICAtdGhpcy5zY3JvbGwuY3VycmVudCArXG4gICAgICB0aGlzLm1haW5NZWRpYUVsZW1lbnRTaXplcy50b3RhbCAqXG4gICAgICAgICh0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZC5sZW5ndGggLSAxKSAtXG4gICAgICB0aGlzLm1haW5NZWRpYUVsZW1lbnRTaXplcy53aWR0aCAvIDI7XG5cbiAgICBlYWNoKHRoaXMubWVkaWFFbGVtZW50cywgKGVsZW1lbnQpID0+IHtcbiAgICAgIGVsZW1lbnQuY2hhbmdlU2l6ZUZyb21BbGxUb01haW4oe1xuICAgICAgICBzY3JvbGw6IHRoaXMuc2Nyb2xsLmN1cnJlbnQsXG4gICAgICAgIGVuZFgsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGdzYXAuZGVsYXllZENhbGwoMSwgKCkgPT4ge1xuICAgICAgdGhpcy5vblNob3dFbmQoJ21haW4nKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9uU2hvd0FsbCgpIHtcbiAgICBjb25zdCBzdGFydFggPVxuICAgICAgLXRoaXMuc2Nyb2xsLmN1cnJlbnQgK1xuICAgICAgdGhpcy5tYWluTWVkaWFFbGVtZW50U2l6ZXMudG90YWwgKlxuICAgICAgICAodGhpcy5tZWRpYUVsZW1lbnRzRmlsdGVyZWQubGVuZ3RoIC0gMSkgLVxuICAgICAgdGhpcy5tYWluTWVkaWFFbGVtZW50U2l6ZXMud2lkdGggLyAyO1xuXG4gICAgY29uc3Qgc3RhcnRXaWR0aCA9XG4gICAgICAodGhpcy5tYWluTWVkaWFFbGVtZW50U2l6ZXMudG90YWwgLVxuICAgICAgICB0aGlzLm1haW5NZWRpYUVsZW1lbnRTaXplcy53aWR0aCAvIDIpICpcbiAgICAgICh0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZC5sZW5ndGggLSAxKTtcblxuICAgIGNvbnN0IGVuZFdpZHRoID1cbiAgICAgICh0aGlzLmFsbE1lZGlhRWxlbWVudFNpemVzLnRvdGFsIC0gdGhpcy5hbGxNZWRpYUVsZW1lbnRTaXplcy53aWR0aCAvIDIpICpcbiAgICAgIHRoaXMubWVkaWFFbGVtZW50c0ZpbHRlcmVkLmxlbmd0aDtcblxuICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPVxuICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID1cbiAgICAgIHRoaXMuc2Nyb2xsLmxhc3QgPVxuICAgICAgICB0aGlzLnNjcm9sbC5jdXJyZW50ICogKGVuZFdpZHRoIC8gc3RhcnRXaWR0aCk7XG5cbiAgICB0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZCA9IHRoaXMubWVkaWFFbGVtZW50cztcblxuICAgIHRoaXMuZm9vdGVyRG9tLm9uQ2hhbmdlQ291bnRlclRvdGFsKHtcbiAgICAgIHRvdGFsOiB0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZC5sZW5ndGgsXG4gICAgfSk7XG5cbiAgICBlYWNoKHRoaXMubWVkaWFFbGVtZW50c0ZpbHRlcmVkLCAoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGVsZW1lbnQuY2hhbmdlU2l6ZUZyb21NYWluVG9BbGwoe1xuICAgICAgICBzY3JvbGw6IHRoaXMuc2Nyb2xsLmN1cnJlbnQsXG4gICAgICAgIHN0YXJ0WCxcbiAgICAgICAgYWxsTWVkaWFFbGVtZW50U2l6ZXM6IHRoaXMuYWxsTWVkaWFFbGVtZW50U2l6ZXMsXG4gICAgICAgIGluZGV4LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBnc2FwLmRlbGF5ZWRDYWxsKDEsICgpID0+IHtcbiAgICAgIHRoaXMub25TaG93RW5kKCdhbGwnKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9uU2hvd0VuZChuZXdWaWV3KSB7XG4gICAgdGhpcy52aWV3ID0gbmV3VmlldztcblxuICAgIGlmICh0aGlzLnZpZXcgPT09ICdtYWluJykge1xuICAgICAgdGhpcy5zY3JvbGwubGltaXQgPVxuICAgICAgICAodGhpcy5tZWRpYUVsZW1lbnRzRmlsdGVyZWQubGVuZ3RoIC0gMSkgKlxuICAgICAgICAodGhpcy5tYWluTWVkaWFFbGVtZW50U2l6ZXMud2lkdGggKyB0aGlzLm1haW5NZWRpYUVsZW1lbnRTaXplcy5tYXJnaW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNjcm9sbC5saW1pdCA9XG4gICAgICAgICh0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZC5sZW5ndGggLSAxKSAqXG4gICAgICAgICh0aGlzLmFsbE1lZGlhRWxlbWVudFNpemVzLndpZHRoICsgdGhpcy5hbGxNZWRpYUVsZW1lbnRTaXplcy5tYXJnaW4pO1xuICAgIH1cblxuICAgIHRoaXMuY2xhbXAgPSBnc2FwLnV0aWxzLmNsYW1wKDAsIHRoaXMuc2Nyb2xsLmxpbWl0KTtcblxuICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIG9uSG9tZVRvQWJvdXQoKSB7XG4gICAgdGhpcy50ZW1wbGF0ZSA9ICdhYm91dCc7XG5cbiAgICBlYWNoKHRoaXMubWVkaWFzLCAobWVkaWEpID0+IHtcbiAgICAgIG1lZGlhLnRlbXBsYXRlID0gJ2Fib3V0JztcbiAgICB9KTtcblxuICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPVxuICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID1cbiAgICAgIHRoaXMuc2Nyb2xsLmxhc3QgPVxuICAgICAgICAodGhpcy5hYm91dE1lZGlhRWxlbWVudFNpemVzLndpZHRoICtcbiAgICAgICAgICB0aGlzLmFib3V0TWVkaWFFbGVtZW50U2l6ZXMubWFyZ2luKSAqXG4gICAgICAgIDUuNTtcblxuICAgIHRoaXMuaW5maW5pdGUgPSB7XG4gICAgICBjdXJyZW50OiAwLFxuICAgICAgdGFyZ2V0OiAwLFxuICAgICAgbGFzdDogMCxcbiAgICAgIHZlbG9jaXR5OiAwLFxuICAgICAgc3BlZWQ6IDAuNSxcbiAgICAgIGVhc2U6IDAuMSxcbiAgICAgIGRpcmVjdGlvbjogJ3VwJyxcbiAgICB9O1xuXG4gICAgZWFjaCh0aGlzLm1lZGlhRWxlbWVudHMsIChlbGVtZW50KSA9PlxuICAgICAgZWxlbWVudC5jaGFuZ2VTaXplRnJvbUhvbWVUb0Fib3V0KHtcbiAgICAgICAgc2Nyb2xsOiB0aGlzLnNjcm9sbC5jdXJyZW50LFxuICAgICAgICBhYm91dE1lZGlhRWxlbWVudFNpemVzOiB0aGlzLmFib3V0TWVkaWFFbGVtZW50U2l6ZXMsXG4gICAgICB9KVxuICAgICk7XG5cbiAgICBnc2FwLmRlbGF5ZWRDYWxsKDEsICgpID0+IHtcbiAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxuXG4gIG9uQWJvdXRUb0hvbWUoKSB7XG4gICAgdGhpcy50ZW1wbGF0ZSA9ICdob21lJztcblxuICAgIGVhY2godGhpcy5tZWRpYXMsIChtZWRpYSkgPT4ge1xuICAgICAgbWVkaWEudGVtcGxhdGUgPSAnaG9tZSc7XG4gICAgICBtZWRpYS5leHRyYSA9IDA7XG4gICAgfSk7XG5cbiAgICB0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZCA9IGZpbHRlcihcbiAgICAgIHRoaXMubWVkaWFFbGVtZW50cyxcbiAgICAgIChpdGVtKSA9PiBpdGVtLmlzTWFpbiA9PT0gdHJ1ZVxuICAgICk7XG5cbiAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID1cbiAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9XG4gICAgICB0aGlzLnNjcm9sbC5sYXN0ID1cbiAgICAgICAgKHRoaXMubWFpbk1lZGlhRWxlbWVudFNpemVzLndpZHRoICsgdGhpcy5tYWluTWVkaWFFbGVtZW50U2l6ZXMubWFyZ2luKSAqXG4gICAgICAgIDUuNTtcblxuICAgIGNvbnN0IGVuZFggPVxuICAgICAgLXRoaXMuc2Nyb2xsLmN1cnJlbnQgK1xuICAgICAgdGhpcy5tYWluTWVkaWFFbGVtZW50U2l6ZXMudG90YWwgKlxuICAgICAgICAodGhpcy5tZWRpYUVsZW1lbnRzRmlsdGVyZWQubGVuZ3RoIC0gMSkgLVxuICAgICAgdGhpcy5tYWluTWVkaWFFbGVtZW50U2l6ZXMud2lkdGggLyAyO1xuXG4gICAgZWFjaCh0aGlzLm1lZGlhRWxlbWVudHMsIChlbGVtZW50KSA9PiB7XG4gICAgICBlbGVtZW50LmNoYW5nZVNpemVGcm9tQWJvdXRUb0hvbWUoe1xuICAgICAgICBzY3JvbGw6IHRoaXMuc2Nyb2xsLmN1cnJlbnQsXG4gICAgICAgIGVuZFgsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGdzYXAuZGVsYXllZENhbGwoMSwgKCkgPT4ge1xuICAgICAgdGhpcy5zY3JvbGwubGltaXQgPVxuICAgICAgICAodGhpcy5tZWRpYUVsZW1lbnRzRmlsdGVyZWQubGVuZ3RoIC0gMSkgKlxuICAgICAgICAodGhpcy5tYWluTWVkaWFFbGVtZW50U2l6ZXMud2lkdGggKyB0aGlzLm1haW5NZWRpYUVsZW1lbnRTaXplcy5tYXJnaW4pO1xuICAgICAgdGhpcy5jbGFtcCA9IGdzYXAudXRpbHMuY2xhbXAoMCwgdGhpcy5zY3JvbGwubGltaXQpO1xuXG4gICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnZpZXcgPSAnbWFpbic7XG4gICAgfSk7XG4gIH1cblxuICBvblByb2plY3RUb0hvbWUoKSB7XG4gICAgdGhpcy50ZW1wbGF0ZSA9ICdob21lJztcblxuICAgIGVhY2godGhpcy5tZWRpYXMsIChtZWRpYSkgPT4ge1xuICAgICAgbWVkaWEudGVtcGxhdGUgPSAnaG9tZSc7XG4gICAgICBtZWRpYS5wYWdlU2Nyb2xsID0gMDtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmlzU2Nyb2xsYWJsZSAmJiB0aGlzLnZpZXcgPT09ICdhbGwnKSB7XG4gICAgICB0aGlzLm9uU2hvd01haW4oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZG8gc29tZXRoaW5nXG4gICAgfVxuXG4gICAgZWFjaCh0aGlzLm1lZGlhRWxlbWVudHMsIChtZWRpYSkgPT4ge1xuICAgICAgbWVkaWEudmlldyA9ICdtYWluJztcbiAgICAgIG1lZGlhLnRlbXBsYXRlID0gJ2hvbWUnO1xuICAgIH0pO1xuXG4gICAgZ3NhcC5kZWxheWVkQ2FsbCgxLCAoKSA9PiB7XG4gICAgICB0aGlzLmlzU2Nyb2xsYWJsZSA9IHRydWU7XG4gICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnZpZXcgPSAnbWFpbic7XG4gICAgfSk7XG4gIH1cblxuICBvbkNoYW5nZUluZGV4KCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuaXNBbmltYXRpbmcgfHxcbiAgICAgIHRoaXMuYWN0aXZlSW5kZXggPiB0aGlzLm1lZGlhRWxlbWVudHNGaWx0ZXJlZC5sZW5ndGggLSAxXG4gICAgKVxuICAgICAgcmV0dXJuO1xuXG4gICAgY29uc3QgYWN0aXZlTWVkaWFFbGVtZW50ID1cbiAgICAgIHRoaXMubWVkaWFFbGVtZW50c0ZpbHRlcmVkW3RoaXMuYWN0aXZlSW5kZXhdLmVsZW1lbnQ7XG5cbiAgICB0aGlzLmZvb3RlckRvbS5vbkNoYW5nZUluZGV4KHtcbiAgICAgIGFjdGl2ZU1lZGlhRWxlbWVudCxcbiAgICAgIGFjdGl2ZUluZGV4OiB0aGlzLmFjdGl2ZUluZGV4LFxuICAgICAgdmlldzogdGhpcy52aWV3LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExvb3AuXG4gICAqL1xuICB1cGRhdGUoeyBzY3JvbGwsIHBhZ2VTY3JvbGxhYmxlIH0pIHtcbiAgICBpZiAodGhpcy5pc0FuaW1hdGluZykgcmV0dXJuO1xuXG4gICAgdGhpcy50aW1lICs9IDAuMDE7XG5cbiAgICBpZiAodGhpcy50ZW1wbGF0ZSA9PT0gJ2Fib3V0Jykge1xuICAgICAgdGhpcy5hYm91dFVwZGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm5vcm1hbFVwZGF0ZSh7IHNjcm9sbCwgcGFnZVNjcm9sbGFibGUgfSk7XG4gICAgfVxuICB9XG5cbiAgbm9ybWFsVXBkYXRlKHsgc2Nyb2xsLCBwYWdlU2Nyb2xsYWJsZSB9KSB7XG4gICAgaWYgKHRoaXMudGVtcGxhdGUgPT09ICdwcm9qZWN0Jykge1xuICAgICAgaWYgKCFwYWdlU2Nyb2xsYWJsZSAmJiAhdGhpcy5pc1Njcm9sbGFibGUpIHtcbiAgICAgICAgdGhpcy5pc1Njcm9sbGFibGUgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuZm9vdGVyRG9tLnNob3coKTtcblxuICAgICAgICB0aGlzLmdhbGxlcnlFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB0aGlzLmhlYWRlckxvZ29FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICBnc2FwLmRlbGF5ZWRDYWxsKDAuNSwgKCkgPT5cbiAgICAgICAgICB0aGlzLmhlYWRlck5hdkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHRoaXMuaXNTY3JvbGxhYmxlICYmXG4gICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA8IDAgJiZcbiAgICAgICAgdGhpcy52aWV3ID09PSAnbWFpbidcbiAgICAgICkge1xuICAgICAgICB0aGlzLmlzU2Nyb2xsYWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBhZ2UuaXNTY3JvbGxhYmxlID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLmZvb3RlckRvbS5oaWRlKCk7XG5cbiAgICAgICAgdGhpcy5nYWxsZXJ5RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgdGhpcy5oZWFkZXJOYXZFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICBnc2FwLmRlbGF5ZWRDYWxsKDAuNSwgKCkgPT5cbiAgICAgICAgICB0aGlzLmhlYWRlckxvZ29FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5jbGFtcCh0aGlzLnNjcm9sbC50YXJnZXQpO1xuXG4gICAgdGhpcy5zY3JvbGwuY3VycmVudCA9IGdzYXAudXRpbHMuaW50ZXJwb2xhdGUoXG4gICAgICB0aGlzLnNjcm9sbC5jdXJyZW50LFxuICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0LFxuICAgICAgdGhpcy5zY3JvbGwuZWFzZVxuICAgICk7XG5cbiAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gTWF0aC5mbG9vcih0aGlzLnNjcm9sbC5jdXJyZW50KTtcblxuICAgIGlmICh0aGlzLnNjcm9sbC5jdXJyZW50IDwgMC4wMSkge1xuICAgICAgdGhpcy5zY3JvbGwuY3VycmVudCA9IDA7XG4gICAgfVxuXG4gICAgdGhpcy5zY3JvbGwudmVsb2NpdHkgPSBNYXRoLmFicyhcbiAgICAgICh0aGlzLnNjcm9sbC5jdXJyZW50IC0gdGhpcy5zY3JvbGwubGFzdCkgKiAwLjFcbiAgICApO1xuXG4gICAgdGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLmN1cnJlbnQ7XG5cbiAgICBsZXQgaW5kZXggPSB0aGlzLmFjdGl2ZUluZGV4O1xuXG4gICAgaWYgKHNjcm9sbCAmJiBzY3JvbGwgIT09IDApIHtcbiAgICAgIHRoaXMucGFnZVNjcm9sbCA9IHNjcm9sbCArIHRoaXMuc2NyZWVuLmhlaWdodCAqIDAuMzM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudmlldyA9PT0gJ21haW4nKSB7XG4gICAgICBpbmRleCA9IE1hdGgucm91bmQoXG4gICAgICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgLyB0aGlzLm1haW5NZWRpYUVsZW1lbnRTaXplcy50b3RhbFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5kZXggPSBNYXRoLnJvdW5kKHRoaXMuc2Nyb2xsLmN1cnJlbnQgLyB0aGlzLmFsbE1lZGlhRWxlbWVudFNpemVzLnRvdGFsKTtcbiAgICB9XG5cbiAgICBpZiAoaW5kZXggIT09IHRoaXMuYWN0aXZlSW5kZXgpIHtcbiAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSBpbmRleDtcblxuICAgICAgdGhpcy5vbkNoYW5nZUluZGV4KCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudGVtcGxhdGUgPT09ICdwcm9qZWN0Jykge1xuICAgICAgZWFjaCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiB7XG4gICAgICAgIGlmIChtZWRpYSAmJiBtZWRpYS51cGRhdGUpIHtcbiAgICAgICAgICBtZWRpYS51cGRhdGUoe1xuICAgICAgICAgICAgcGFnZVNjcm9sbDogdGhpcy5wYWdlU2Nyb2xsLFxuICAgICAgICAgICAgc2Nyb2xsOiB0aGlzLnNjcm9sbC5jdXJyZW50LFxuICAgICAgICAgICAgdmVsb2NpdHk6IHRoaXMuc2Nyb2xsLnZlbG9jaXR5LFxuICAgICAgICAgICAgdGltZTogdGhpcy50aW1lLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWFjaCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiB7XG4gICAgICAgIGlmIChtZWRpYSAmJiBtZWRpYS51cGRhdGUpIHtcbiAgICAgICAgICBtZWRpYS51cGRhdGUoe1xuICAgICAgICAgICAgc2Nyb2xsOiB0aGlzLnNjcm9sbC5jdXJyZW50LFxuICAgICAgICAgICAgdmVsb2NpdHk6IHRoaXMuc2Nyb2xsLnZlbG9jaXR5LFxuICAgICAgICAgICAgdGltZTogdGhpcy50aW1lLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBlYWNoKHRoaXMubWVkaWFFbGVtZW50c0ZpbHRlcmVkLCAobWVkaWFFbGVtZW50KSA9PiB7XG4gICAgICBpZiAobWVkaWFFbGVtZW50ICYmIG1lZGlhRWxlbWVudC51cGRhdGUpIHtcbiAgICAgICAgbWVkaWFFbGVtZW50LnVwZGF0ZSh7XG4gICAgICAgICAgc2Nyb2xsOiB0aGlzLnNjcm9sbC5jdXJyZW50LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFib3V0VXBkYXRlKCkge1xuICAgIGlmICh0aGlzLmluZmluaXRlLmRpcmVjdGlvbiA9PT0gJ3VwJykge1xuICAgICAgdGhpcy5pbmZpbml0ZS50YXJnZXQgKz0gdGhpcy5pbmZpbml0ZS5zcGVlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbmZpbml0ZS50YXJnZXQgLT0gdGhpcy5pbmZpbml0ZS5zcGVlZDtcbiAgICB9XG5cbiAgICB0aGlzLmluZmluaXRlLmN1cnJlbnQgPSBnc2FwLnV0aWxzLmludGVycG9sYXRlKFxuICAgICAgdGhpcy5pbmZpbml0ZS5jdXJyZW50LFxuICAgICAgdGhpcy5pbmZpbml0ZS50YXJnZXQsXG4gICAgICB0aGlzLmluZmluaXRlLmVhc2VcbiAgICApO1xuXG4gICAgdGhpcy5pbmZpbml0ZS5zY3JvbGxDdXJyZW50ID0gZ3NhcC51dGlscy5pbnRlcnBvbGF0ZShcbiAgICAgIHRoaXMuaW5maW5pdGUuc2Nyb2xsQ3VycmVudCxcbiAgICAgIHRoaXMuaW5maW5pdGUuc2Nyb2xsVGFyZ2V0LFxuICAgICAgdGhpcy5pbmZpbml0ZS5lYXNlXG4gICAgKTtcblxuICAgIGxldCBzY3JvbGxEaWZmID0gTWF0aC5hYnMoXG4gICAgICB0aGlzLmluZmluaXRlLnNjcm9sbEN1cnJlbnQgLSB0aGlzLmluZmluaXRlLnNjcm9sbExhc3RcbiAgICApO1xuXG4gICAgaWYgKHNjcm9sbERpZmYgPCAxLjUpIHtcbiAgICAgIHNjcm9sbERpZmYgPSAwO1xuICAgIH1cblxuICAgIGlmIChzY3JvbGxEaWZmID4gdGhpcy5pbmZpbml0ZS5zY3JvbGxEaWZmKSB7XG4gICAgICB0aGlzLmluZmluaXRlLnNjcm9sbERpZmYgPSBzY3JvbGxEaWZmO1xuICAgICAgdGhpcy5pbmZpbml0ZS5zcGVlZCA9IHRoaXMuaW5maW5pdGUuc2Nyb2xsRGlmZiAqIDAuMDI7XG4gICAgfVxuXG4gICAgaWYgKHNjcm9sbERpZmYgPT09IDAgJiYgdGhpcy5pbmZpbml0ZS5zY3JvbGxEaWZmICE9PSAwKSB7XG4gICAgICB0aGlzLmluZmluaXRlLnNjcm9sbERpZmYgPSAwO1xuICAgIH1cblxuICAgIHRoaXMuaW5maW5pdGUudmVsb2NpdHkgPSBNYXRoLmFicyhcbiAgICAgICh0aGlzLmluZmluaXRlLmN1cnJlbnQgLSB0aGlzLmluZmluaXRlLmxhc3QpICogMC4xXG4gICAgKTtcblxuICAgIHRoaXMuaW5maW5pdGUubGFzdCA9IHRoaXMuaW5maW5pdGUuY3VycmVudDtcblxuICAgIHRoaXMuaW5maW5pdGUuc2Nyb2xsTGFzdCA9IHRoaXMuaW5maW5pdGUuc2Nyb2xsQ3VycmVudDtcblxuICAgIGVhY2godGhpcy5tZWRpYXMsIChtZWRpYSwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChtZWRpYSAmJiBtZWRpYS51cGRhdGUpIHtcbiAgICAgICAgaWYgKGluZGV4ICUgMiA9PT0gMCkge1xuICAgICAgICAgIG1lZGlhLnVwZGF0ZSh7XG4gICAgICAgICAgICBzY3JvbGw6IHRoaXMuc2Nyb2xsLmN1cnJlbnQsXG4gICAgICAgICAgICBpbmZpbml0ZTogLXRoaXMuaW5maW5pdGUuY3VycmVudCxcbiAgICAgICAgICAgIHZlbG9jaXR5OiAwLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiB0aGlzLmluZmluaXRlLmRpcmVjdGlvbiA9PT0gJ3VwJyA/ICdkb3duJyA6ICd1cCcsXG4gICAgICAgICAgICB0aW1lOiB0aGlzLnRpbWUsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWVkaWEudXBkYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbDogdGhpcy5zY3JvbGwuY3VycmVudCxcbiAgICAgICAgICAgIGluZmluaXRlOiB0aGlzLmluZmluaXRlLmN1cnJlbnQsXG4gICAgICAgICAgICB2ZWxvY2l0eTogMCxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogdGhpcy5pbmZpbml0ZS5kaXJlY3Rpb24sXG4gICAgICAgICAgICB0aW1lOiB0aGlzLnRpbWUsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGVhY2godGhpcy5tZWRpYUVsZW1lbnRzRmlsdGVyZWQsIChtZWRpYUVsZW1lbnQpID0+IHtcbiAgICAgIGlmIChtZWRpYUVsZW1lbnQgJiYgbWVkaWFFbGVtZW50LnVwZGF0ZSkge1xuICAgICAgICBtZWRpYUVsZW1lbnQudXBkYXRlKHtcbiAgICAgICAgICBzY3JvbGw6IHRoaXMuc2Nyb2xsLmN1cnJlbnQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kuXG4gICAqL1xuICBkZXN0cm95KCkge1xuICAgIGlmICh0aGlzLm1lZGlhKSB7XG4gICAgICB0aGlzLm1lZGlhLm1lc2gucmVtb3ZlRnJvbVBhcmVudCgpO1xuICAgIH1cbiAgfVxufVxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiZGI3NTQ3ZjBjOGQ4NmI0NDg2YjhcIikiXSwibmFtZXMiOlsiR2FsbGVyeSIsImNvbnN0cnVjdG9yIiwic2NlbmUiLCJ2aWV3cG9ydCIsInNjcmVlbiIsImdlb21ldHJ5IiwidGVtcGxhdGUiLCJwYWdlIiwidGhpcyIsImdhbGxlcnlFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2FsbGVyeUl0ZW1FbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsb2dvRWxlbWVudCIsImhlYWRlckxvZ29FbGVtZW50IiwiaGVhZGVyTmF2RWxlbWVudCIsInNjcm9sbCIsInBvc2l0aW9uIiwiY3VycmVudCIsInRhcmdldCIsImxpbWl0IiwibGFzdCIsInZlbG9jaXR5IiwiZWFzZSIsImNsYW1wIiwiZ3NhcCIsInV0aWxzIiwiaW5maW5pdGUiLCJzcGVlZCIsImRpZmYiLCJkaXJlY3Rpb24iLCJzY3JvbGxDdXJyZW50Iiwic2Nyb2xsVGFyZ2V0Iiwic2Nyb2xsTGFzdCIsInNjcm9sbERpZmYiLCJpdGVtV2lkdGgiLCJoZWlnaHQiLCJpc0Rvd24iLCJpc0FuaW1hdGluZyIsInZpZXciLCJmaWx0ZXIiLCJhY3RpdmVJbmRleCIsInRpbWUiLCJpc1Njcm9sbGFibGUiLCJwYWdlU2Nyb2xsIiwidHJhbnNmb3JtUHJlZml4IiwiUHJlZml4IiwiY3JlYXRlR2FsbGVyeSIsImNyZWF0ZURvbUdhbGxlcnkiLCJvblJlc2l6ZSIsInNob3ciLCJmb290ZXJEb20iLCJGb290ZXJEb20iLCJvbkJ1dHRvblZpZXdDbGljayIsIm9uVmlld0NsaWNrIiwiYmluZCIsIm9uQnV0dG9uRmlsdGVyQ2xpY2siLCJvbkZpbHRlckNsaWNrIiwibWVkaWFFbGVtZW50cyIsIm1hcCIsImVsZW1lbnQiLCJpbmRleCIsIk1lZGlhRG9tIiwibWVkaWEiLCJtZWRpYXMiLCJtZWRpYUVsZW1lbnRzRmlsdGVyZWQiLCJpdGVtIiwiaXNNYWluIiwiTWVkaWEiLCJlYWNoIiwiaGlkZSIsIm1haW5NZWRpYUVsZW1lbnRTaXplcyIsIndpZHRoIiwibWFyZ2luIiwidG90YWwiLCJhbGxNZWRpYUVsZW1lbnRTaXplcyIsImFib3V0TWVkaWFFbGVtZW50U2l6ZXMiLCJsZW5ndGgiLCJnYWxsZXJ5WSIsImdhbGxlcnlTdGFydCIsIm1lZGlhbEVsZW1lbnQiLCJvblRvdWNoRG93biIsImV2ZW50Iiwic3RhcnQiLCJ0b3VjaGVzIiwiY2xpZW50WCIsIm9uVG91Y2hNb3ZlIiwieCIsImRpc3RhbmNlIiwib25Ub3VjaFVwIiwib25XaGVlbCIsInBpeGVsWSIsImNsYXNzTGlzdCIsImFkZCIsInRvdGFsTWVkaWFFbGVtZW50cyIsIm9uU2hvd0FsbCIsInJlbW92ZSIsIm9uU2hvd01haW4iLCJvblNob3dGaWx0ZXIiLCJzdGFydFdpZHRoIiwiY2F0ZWdvcnkiLCJlbmRXaWR0aCIsIm9uQ2hhbmdlQ291bnRlclRvdGFsIiwibGFzdEZpbHRlckluZGV4IiwiZW5kWCIsImNoYW5nZVNpemVGcm9tQWxsVG9GaWx0ZXIiLCJlbGVtZW50SW5kZXgiLCJmaW5kSW5kZXgiLCJlbCIsImRlbGF5ZWRDYWxsIiwib25TaG93RW5kIiwiY2hhbmdlU2l6ZUZyb21BbGxUb01haW4iLCJzdGFydFgiLCJjaGFuZ2VTaXplRnJvbU1haW5Ub0FsbCIsIm5ld1ZpZXciLCJvbkhvbWVUb0Fib3V0IiwiY2hhbmdlU2l6ZUZyb21Ib21lVG9BYm91dCIsIm9uQWJvdXRUb0hvbWUiLCJleHRyYSIsImNoYW5nZVNpemVGcm9tQWJvdXRUb0hvbWUiLCJvblByb2plY3RUb0hvbWUiLCJvbkNoYW5nZUluZGV4IiwiYWN0aXZlTWVkaWFFbGVtZW50IiwidXBkYXRlIiwicGFnZVNjcm9sbGFibGUiLCJhYm91dFVwZGF0ZSIsIm5vcm1hbFVwZGF0ZSIsImludGVycG9sYXRlIiwiTWF0aCIsImZsb29yIiwiYWJzIiwicm91bmQiLCJtZWRpYUVsZW1lbnQiLCJkZXN0cm95IiwibWVzaCIsInJlbW92ZUZyb21QYXJlbnQiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiaCJdLCJzb3VyY2VSb290IjoiIn0=